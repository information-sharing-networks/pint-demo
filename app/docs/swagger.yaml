consumes:
- application/json
definitions:
  ebl.ActorParty:
    properties:
      eblPlatform:
        description: 'EblPlatform: The eBL platform code (required) - BOLE, WAVE etc
          (c.f https://github.com/dcsaorg/DCSA-OpenAPI/tree/master/reference-data)'
        type: string
      identifyingCodes:
        description: 'IdentifyingCodes: List of identifying codes (at least one required)'
        items:
          $ref: '#/definitions/ebl.IdentifyingCode'
        type: array
      partyName:
        description: 'PartyName: Name of the party (required)'
        type: string
      representedParty:
        allOf:
        - $ref: '#/definitions/ebl.RepresentedActorParty'
        description: 'RepresentedParty: An identifier issued by the eBL Solution Provider,
          used for auditing purposes to verify that the endorsement chain action has
          been securely recorded.'
      taxLegalReferences:
        description: 'TaxLegalReferences: List of tax/legal references (optional)'
        items:
          $ref: '#/definitions/ebl.TaxLegalReference'
        type: array
    type: object
  ebl.DocumentMetadata:
    properties:
      documentChecksum:
        description: 'documentChecksum: SHA-256 checksum of the document'
        type: string
      mediaType:
        description: 'mediaType: MIME type of the document'
        type: string
      name:
        description: 'name: The name of the document'
        type: string
      size:
        description: 'size: The size of the decoded document in bytes (not the Base64
          encoded size)'
        type: integer
    type: object
  ebl.EblEnvelope:
    properties:
      envelopeManifestSignedContent:
        description: |-
          EnvelopeManifestSignedContent: JWS compact serialization of the EnvelopeManifest
          (signed by the sending platform).

          The EnvelopeManifest payload is used by the receiver to verify that the transport
          document and the transfer chain have not been tampered with and to establish details
          of any supporting documents that will be subsequently transferred by the sender.
        type: string
      envelopeTransferChain:
        description: |-
          EnvelopeTransferChain: Ordered list of JWS tokens representing the complete
          transfer chain.

          Each EnvelopeTransferChainEntry represents a batch of transactions
          that happened on a single platform and is signed by the sending platform.

          The full chain is required by the receiver to verify the complete history and detect tampering.
        items:
          type: string
        type: array
      transportDocument:
        description: 'TransportDocument: The transport document (Bill of Lading) as
          a JSON object.'
        type: object
    type: object
  ebl.EnvelopeManifest:
    properties:
      eBLVisualisationByCarrier:
        allOf:
        - $ref: '#/definitions/ebl.DocumentMetadata'
        description: EBLVisualisationByCarrier contains metadata for the eBL visualisation
          (optional).
      lastEnvelopeTransferChainEntrySignedContentChecksum:
        description: |-
          LastEnvelopeTransferChainEntrySignedContentChecksum is the SHA-256 crypto.Hash of the most recent entry
          in the transfer chain.
          This binds the manifest to the specific transfer chain it was created for,
          preventing an attacker from replacing the last entry with a valid one from a different transfer.
        type: string
      supportingDocuments:
        description: SupportingDocuments contains metadata for supporting documents
          (optional).
        items:
          $ref: '#/definitions/ebl.DocumentMetadata'
        type: array
      transportDocumentChecksum:
        description: |-
          TransportDocumentChecksum is the SHA-256 crypto.Hash of the canonicalized transport document.
          This is calculated over the canonicalized JSON bytes of the transport document and should never change during the lifetime of the BL.
        type: string
    type: object
  ebl.EnvelopeTransferChainEntry:
    properties:
      controlTrackingRegistry:
        description: 'ControlTrackingRegistry: URI of CTR (optional, only in first
          entry). Example: https://ctr.dcsa.org/v1'
        type: string
      eblPlatform:
        description: 'EblPlatform: The eBL platform code (e.g., "WAVE", "BOLE", "CARX")
          responsible for this entry'
        type: string
      issuanceManifestSignedContent:
        description: |-
          IssuanceManifestSignedContent: JWS of IssuanceManifest (required for first entry only)
          The issuance manifest is created and signed the carrier when the eBL is issued and proves the integrity of the transport document and the issueTo party data.
          It should not change for the lifetime of the eBL.
        type: string
      previousEnvelopeTransferChainEntrySignedContentChecksum:
        description: |-
          PreviousEnvelopeTransferChainEntrySignedContentChecksum: SHA-256 of previous entry JWS (omitted for first entry)
          this is the checksum of the previous entry in the transfer chain, and should only be included if this is not the first entry in the transfer chain.
          This ensures the integrity of the transfer chain.
        type: string
      transactions:
        description: 'Transactions: List of transactions (at least one required)'
        items:
          $ref: '#/definitions/ebl.Transaction'
        type: array
      transportDocumentChecksum:
        description: |-
          TransportDocumentChecksum: SHA-256 of canonicalized transport document JSON
          this should not change for the lifetime of the eBL.
        type: string
    type: object
  ebl.IdentifyingCode:
    properties:
      codeListName:
        description: |-
          codeListName: The name of the code list, code generation mechanism or code authority for the partyCode.
          Example values could be: DID (codeListProvider W3C), LEI (codeListProvider GLEIF), DUNS (codeListProvider Dunn and Bradstreet) etc.
        type: string
      codeListProvider:
        description: 'CodeListProvider: The provider of the code list (this can be
          a platform code like "WAVE", or a code list provider like "DCSA", "GLEIF",
          "W3C", "DNB")'
        type: string
      partyCode:
        description: 'PartyCode: Code to identify the party as provided by the code
          list provider'
        type: string
    type: object
  ebl.RecipientParty:
    properties:
      eblPlatform:
        description: 'EblPlatform: The eBL platform code (required)'
        type: string
      identifyingCodes:
        items:
          $ref: '#/definitions/ebl.IdentifyingCode'
        type: array
      partyName:
        description: 'PartyName: Name of the party (required)'
        type: string
      representedParty:
        allOf:
        - $ref: '#/definitions/ebl.RepresentedRecipientParty'
        description: 'RepresentedParty: Party on whose behalf the action was directed
          (optional)'
      taxLegalReferences:
        description: 'TaxLegalReferences: List of tax/legal references (optional)'
        items:
          $ref: '#/definitions/ebl.TaxLegalReference'
        type: array
    type: object
  ebl.RepresentedActorParty:
    properties:
      identifyingCodes:
        description: 'IdentifyingCodes: List of identifying codes (optional)'
        items:
          $ref: '#/definitions/ebl.IdentifyingCode'
        type: array
      partyName:
        description: 'PartyName: Name of the party (required)'
        type: string
    type: object
  ebl.RepresentedRecipientParty:
    properties:
      identifyingCodes:
        description: 'IdentifyingCodes: List of identifying codes (optional)'
        items:
          $ref: '#/definitions/ebl.IdentifyingCode'
        type: array
      partyName:
        description: 'PartyName: Name of the party (required)'
        type: string
    type: object
  ebl.TaxLegalReference:
    properties:
      countryCode:
        description: 'CountryCode: ISO 3166-1 alpha-2 country code'
        type: string
      type:
        description: 'Type: The reference type code (e.g., "PAN", "EORI", "GSTIN",
          "CVR")'
        type: string
      value:
        description: 'Value: The actual reference value'
        type: string
    type: object
  ebl.Transaction:
    properties:
      actionCode:
        description: 'actionCode: The transaction type (ISSUE, TRANSFER, ENDORSE,
          SURRENDER_FOR_DELIVERY, etc.)'
        type: string
      actionDateTime:
        description: 'actionDateTime: RFC3339 timestamp (UTC) when the transaction
          was created'
        type: string
      actor:
        allOf:
        - $ref: '#/definitions/ebl.ActorParty'
        description: 'actor: The legal entity (party) performing the action (required)'
      auditReference:
        description: 'auditReference: Audit identifier from eBL Solution Provider
          (optional)'
        type: string
      comments:
        description: 'comments: Free text comment (optional)'
        type: string
      reasonCode:
        description: |-
          reasonCode: Reason code for SURRENDER_FOR_AMENDMENT (optional)
          SWTP (Switch to paper)
          COD (Change of destination)
          SWI (Switch BL)
        type: string
      recipient:
        allOf:
        - $ref: '#/definitions/ebl.RecipientParty'
        description: 'recipient: The party receiving the action (optional for some
          action codes like SIGN)'
    type: object
  handlers.JWKSResponse:
    properties:
      keys:
        items:
          additionalProperties: {}
          type: object
        type: array
    type: object
  handlers.PartyIdentifyingCodeRequest:
    properties:
      codeListName:
        type: string
      codeListProvider:
        type: string
      partyCode:
        type: string
    type: object
  handlers.PartyIdentifyingCodeResponse:
    properties:
      codeListName:
        type: string
      codeListProvider:
        type: string
      id:
        type: string
      party_id:
        type: string
      partyCode:
        type: string
    type: object
  handlers.PartyRequest:
    properties:
      active:
        type: boolean
      partyName:
        type: string
    type: object
  handlers.PartyResponse:
    properties:
      active:
        type: boolean
      id:
        type: string
      partyName:
        type: string
    type: object
  handlers.VersionResponse:
    properties:
      build_time:
        example: "2024-01-28T10:00:00Z"
        type: string
      service:
        example: pint-server
        type: string
      version:
        example: 1.0.0
        type: string
    type: object
  pint.DetailedError:
    properties:
      errorCode:
        allOf:
        - $ref: '#/definitions/pint.ErrorCode'
        description: 'error code used on the platform: 7000-7999 for technical errors,
          8000-8999 for functional errors'
      errorCodeMessage:
        type: string
      errorCodeText:
        type: string
      jsonPath:
        type: string
      property:
        type: string
      value:
        type: string
    type: object
  pint.EnvelopeTransferFinishedResponse:
    properties:
      duplicateOfAcceptedEnvelopeTransferChainEntrySignedContent:
        description: |-
          DuplicateOfAcceptedEnvelopeTransferChainEntrySignedContent is the last transfer chain entry
          from the previously accepted envelope transfer.
          Only included when ResponseCode is DUPE.
          This is a JWS compact serialization token.
        example: eyJhbGciOiJFZERTQSIsImtpZCI6IjQ0MzkzNDQ5MzQ0OTM0NDkzNDQ5MzQ0OTM0NDkzNDQ5MzQ0OTM0NDkzNDQ5MzQ0OTM0NDkzNDQ5MzQ0OTM0NDkzNDQ5Mz
        type: string
      lastEnvelopeTransferChainEntrySignedContentChecksum:
        description: |-
          LastEnvelopeTransferChainEntrySignedContentChecksum is the SHA-256 checksum of the last
          transfer chain entry received.
        example: 20a0257b313ae08417e07f6555c4ec829a512c083f3ead16b41158018a22abe9
        type: string
      missingAdditionalDocumentChecksums:
        description: |-
          MissingAdditionalDocumentChecksums lists the checksums of additional documents that
          have not been received by the receiving platform.
        example:
        - 583c29ab3e47f2d80899993200d3fbadb9f8a367f3a39f715935c46d7a283006
        items:
          type: string
        type: array
      reason:
        description: |-
          Reason is a free text comment clarifying the result or suggesting follow-up actions.
          Omitted when ResponseCode is RECE (no additional information needed).
        example: 'jws.Verify(): invalid key type'
        type: string
      receivedAdditionalDocumentChecksums:
        description: |-
          ReceivedAdditionalDocumentChecksums confirms all additional documents received during
          the envelope transfer.
          Included with RECE or DUPE ResponseCode to provide a signed receipt.
          This includes all additional documents (including ones the receiver already had).
          leave as nil when not applicable (eg errors BENV,BSIG).  To return an empty list use []string{}
        example:
        - 123329ab3e47f2d80899993200d3fbadb9f8a367f3a39f715935c46d7a283006
        items:
          type: string
        type: array
      responseCode:
        allOf:
        - $ref: '#/definitions/pint.ResponseCode'
        description: ResponseCode indicates the result of the envelope transfer.
        example: BSIG
    type: object
  pint.EnvelopeTransferStartedResponse:
    properties:
      envelopeReference:
        description: |-
          EnvelopeReference is the receiver-generated identifier for this envelope transfer.
          Used in subsequent API calls (PUT additional-documents, PUT finish-transfer).
          This is a UUID automatically generated by the receiver (see envelopes.id in the database)
          and is a proxy for the last transfer chain entry checksum.
        example: 4TkP5nvgTly0MwFrDxfIkR2rvOjkUIgzibBoKABU
        type: string
      lastEnvelopeTransferChainEntrySignedContentChecksum:
        description: |-
          LastEnvelopeTransferChainEntrySignedContentChecksum is the SHA-256 checksum of the last
          transfer chain entry received.
        example: 20a0257b313ae08417e07f6555c4ec829a512c083f3ead16b41158018a22abe9
        type: string
      missingAdditionalDocumentChecksums:
        description: |-
          MissingAdditionalDocumentChecksums lists the checksums of additional documents that
          the receiving platform expects to receive before accepting the envelope transfer.
        items:
          type: string
        type: array
      receivedAdditionalDocumentChecksums:
        description: |-
          ReceivedAdditionalDocumentChecksums confirms all additional documents received during
          the envelope transfer (will be an empty list for new transfers, but may contain items for retries)
        items:
          type: string
        type: array
      transportDocumentChecksum:
        description: |-
          TransportDocumentChecksum is the SHA-256 checksum of the transport document (eBL).
          Computed on the canonical form of the JSON.
        example: 583c29ab3e47f2d80899993200d3fbadb9f8a367f3a39f715935c46d7a283006
        type: string
    type: object
  pint.ErrorCode:
    enum:
    - 7001
    - 7002
    - 7003
    - 7004
    - 7005
    - 7006
    - 7007
    - 7008
    - 7009
    - 7010
    - 7011
    - 8001
    - 8002
    - 8003
    type: integer
    x-enum-comments:
      ErrCodeInsufficientTrust: Trust level below minimum required
      ErrCodeMalformedRequest: JSON parsing or encoding failed
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - ""
    - ""
    - JSON parsing or encoding failed
    - ""
    - ""
    - ""
    - ""
    - ""
    - ""
    - Trust level below minimum required
    - ""
    x-enum-varnames:
    - ErrCodeBadSignature
    - ErrCodeBadCertificate
    - ErrCodeBadChecksum
    - ErrCodeInvalidEnvelope
    - ErrCodeInternalError
    - ErrCodeMalformedRequest
    - ErrCodeKeyError
    - ErrCodeRegistryError
    - ErrCodeRateLimitExceeded
    - ErrCodeRequestTooLarge
    - ErrCodeNotFound
    - ErrCodeUnknownParty
    - ErrCodeInsufficientTrust
    - ErrCodeDispute
  pint.ErrorResponse:
    properties:
      errorDateTime:
        description: The DateTime corresponding to the error occurring
        type: string
      errors:
        description: An array of errors providing more detail about the root cause
        items:
          $ref: '#/definitions/pint.DetailedError'
        type: array
      httpMethod:
        description: The HTTP method used to make the request e.g. GET, POST, etc
        type: string
      providerCorrelationReference:
        description: A unique identifier to the HTTP request within the scope of the
          API provider
        type: string
      requestUri:
        description: The URI that was requested
        type: string
      statusCode:
        description: The HTTP status code returned
        type: integer
      statusCodeMessage:
        description: A long description corresponding to the HTTP status code with
          additional information
        type: string
      statusCodeText:
        description: A standard short description corresponding to the HTTP status
          code
        type: string
    type: object
  pint.ReceiverValidationResponse:
    properties:
      partyName:
        description: PartyName is the name of the party that was validated
        example: Globeteam
        type: string
    type: object
  pint.ResponseCode:
    enum:
    - RECE
    - DUPE
    - BSIG
    - BENV
    - INCD
    - MDOC
    - DISE
    type: string
    x-enum-varnames:
    - ResponseCodeRECE
    - ResponseCodeDUPE
    - ResponseCodeBSIG
    - ResponseCodeBENV
    - ResponseCodeINCD
    - ResponseCodeMDOC
    - ResponseCodeDISE
  services.PartyIdentifyingCode:
    properties:
      codeListName:
        description: CodeListName is optional - the name of the code list (e.g., "DID",
          "LEI", "DUNS")
        example: DID
        type: string
      codeListProvider:
        description: CodeListProvider is the provider of the code list (e.g., "WAVE",
          "CARX", "GLEIF", "W3C")
        example: W3C
        type: string
      partyCode:
        description: PartyCode is the code to identify the party as provided by the
          code list provider
        example: did:web:example.com:party:12345
        type: string
    type: object
info:
  contact: {}
  description: |
    pint-server is an implemenation of the DCSA v3 PINT API for receiving eBL envelope transfers

    ## Common Error Responses
    All endpoints may return:
    - `413` Request body exceeds size limit
    - `429` Rate limit exceeded
    - `500` Internal server error

    Individual endpoints document their specific business logic errors.

    ## Request Limits
    All endpoints are protected by:
    - **Rate limiting**: Configurable requests per second (see env vars) - default 100 rps (set to 0 to disable)
    - **Request size limits**: Configurable (see env vars) - default 1MB

    Check the X-Max-Request-Body response header for the configured limit on signals payload.

    The rate limit is set globaly and prevents abuse of the service.
    In production there may be additional protections in place such as per-IP rate limiting provided by the load balancer/reverse proxy.

    ## Authentication & Authorization

    The pint-demo PINT APIs do not require credentials to be sent with the request.
    Participating platforms are authenticated via JWS signatures -
    requests must be signed with a key registered in the platform registry. Unrecognized keys are rejected.

    In a production system, OAuth 2.0 service accounts may be used to provide additional authentication and authorization capabilities,
    e.g where external clients need to initiate a transfer on behalf of a user.
  license:
    name: MIT
  title: pint-server
paths:
  /.well-known/jwks.json:
    get:
      description: |-
        Returns the JWK set for the platform.

        Use this endpoint to retrieve the public key needed to verify signatures from this platform.

        The JWK set in the response conforms to the [JWK specification](https://datatracker.ietf.org/doc/html/rfc7517).

        Note: this service supports Ed25519 and RSA public keys so you should expect to see either of these key types in the returned JWK set.
      responses:
        "200":
          description: JWK set
          schema:
            $ref: '#/definitions/handlers.JWKSResponse'
      summary: Get JWK set
      tags:
      - Common
  /admin/parties:
    post:
      consumes:
      - application/json
      parameters:
      - description: Party details
        in: body
        name: party
        required: true
        schema:
          $ref: '#/definitions/handlers.PartyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/handlers.PartyResponse'
        "400":
          description: Invalid request
          schema:
            type: string
      summary: Create a new party
      tags:
      - Admin
  /admin/parties/:
    get:
      parameters:
      - description: Code list provider
        in: query
        name: codeListProvider
        required: true
        type: string
      - description: Code list name (optional)
        in: query
        name: codeListName
        type: string
      - description: Party code
        in: query
        name: partyCode
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.PartyResponse'
        "400":
          description: Invalid request
          schema:
            type: string
        "404":
          description: Party not found
          schema:
            type: string
      summary: Get party by party code
      tags:
      - Admin
  /admin/parties/{partyID}:
    get:
      parameters:
      - description: Party ID
        in: path
        name: partyID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.PartyResponse'
        "400":
          description: Invalid party ID
          schema:
            type: string
        "404":
          description: Party not found
          schema:
            type: string
      summary: Get party by ID
      tags:
      - Admin
    put:
      consumes:
      - application/json
      parameters:
      - description: Party ID
        in: path
        name: partyID
        required: true
        type: string
      - description: Party details
        in: body
        name: party
        required: true
        schema:
          $ref: '#/definitions/handlers.PartyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.PartyResponse'
        "400":
          description: Invalid request
          schema:
            type: string
        "404":
          description: Party not found
          schema:
            type: string
      summary: Update an existing party
      tags:
      - Admin
  /admin/parties/{partyID}/codes:
    post:
      consumes:
      - application/json
      parameters:
      - description: Party ID
        in: path
        name: partyID
        required: true
        type: string
      - description: Code details
        in: body
        name: code
        required: true
        schema:
          $ref: '#/definitions/handlers.PartyIdentifyingCodeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/handlers.PartyIdentifyingCodeResponse'
        "400":
          description: Invalid request
          schema:
            type: string
      summary: Add an identifying code to a party
      tags:
      - Admin
  /admin/parties/{partyName}:
    get:
      parameters:
      - description: Party name
        in: path
        name: partyName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.PartyResponse'
        "404":
          description: Party not found
          schema:
            type: string
      summary: Get party by party name
      tags:
      - Admin
  /health/live:
    get:
      description: Check if the HTTP service is alive and responding.
      produces:
      - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Health (liveness) Check
      tags:
      - Common
  /ready:
    get:
      description: Checks if the service is ready to accept traffic (includes database
        connectivity)
      produces:
      - application/json
      responses:
        "200":
          description: status ready
          schema:
            additionalProperties:
              type: string
            type: object
        "503":
          description: status not ready
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Readiness Check
      tags:
      - Common
  /v3/envelopes:
    post:
      description: |-
        Initiates an eBL envelope transfer. The sender provides the transport document (eBL),
        signed envelope manifest, and complete transfer chain.

        The receiving platform validates signatures, checksums, and transfer chain integrity.

        **Success Responses:**

        `201 Created` - Transfer started but not yet accepted (unsigned JSON response)
        - The envelope transfer is now active
        - Additional documents listed in the EnvelopeManifest are required
        - Sender must transfer documents, then call "Finish envelope transfer" endpoint
        - Only at finish will the transfer be accepted or rejected with a signed response

        Retry handling - if the sender attempts to start a transfer for an eBL that already has an active transfer,
        the receiver assumes the sender has lost track of the state of the transfer.
        In this case, the request is treated as a retry and the existing envelope
        reference and current missing documents are returned with HTTP 201.

        `200 OK` - Transfer accepted immediately (with signed response)
        - No additional documents required, or receiver already has all documents
        - The response body contains a JWS (JSON Web Signature) token, where
        the payload contains the response details.

        The payload includes the `responseCode`: `RECE` (accepted) or `DUPE` (duplicate).
        `DUPE` means this transfer was previously received and accepted - in this case the response
        also includes the last accepted transfer chain entry
        `duplicateOfAcceptedEnvelopeTransferChainEntrySignedContent` which the sender can use
        to confirm which transfer was accepted.

        **Error Responses**

        `422 Unprocessable Entity` indicates the platform has rejected the transfer.
        The response body contains a JWS token with `responseCode` of `BSIG` (signature failure)
        or `BENV` (envelope validation failure). Details of the error are in the payload of the JWS.

        **Trust Level Failures**

        This platform enforces a minimum trust level for signatures,
        based on the x5c header in the envelope manifest JWS.
        - Trust level 1 is the lowest trust level, and means that a JWS
        will be accepted even if no x5c header is present.
        - Trust level 2 means the JWS must contain a valid certificate,
        (Domain Validation (DV) certificates are allowed).
        - Trust level 3 is the highest trust level, and means that the JWS must contain a valid Extended Validation (EV)
        or Organization Validation (OV) certificate.

        The trust level is checked after signature verification, and a valid JWS with an insufficient trust
        level will return a `422 Unprocessable Entity` (BSIG) response.

        Note that if an x5c cert is included, it must be signed by a trusted root CA and the
        public key in the certificate must match the key used to sign the JWS.

        **Unsigned Error Responses**

        The only time you get an unsigned error response is when the request is malformed or the
        receiving platform is having technical difficulties.

        `400 Bad Request` indicates a malformed request (invalid JSON, missing required fields, etc.)

        `500 Internal Server Error` errors indicate temporary technical issues.
        The sender should retry until they receive a signed response.

        **Notes**

        IMPORTANT: Unsigned responses cannot be verified as originating from the receiving platform
        (they may come from middleware or infrastructure). Therefore:
        - Do not assume an unsigned error means the transfer was rejected.
        - Only determine transfer acceptance/rejection from signed responses.

        The sending platform must not rely on the HTTP response status code alone as it is not covered by the signature.
        When there is a mismatch between the HTTP response status code
        and the `responseCode` in the signed response, the `responseCode` takes precedence.
      parameters:
      - description: eBL envelope containing transport document, signed manifest,
          and transfer chain - see the schema ebl.EnvelopeManifest definition for
          details of the expected structure in the signed field
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ebl.EblEnvelope'
      - description: documentation only (not used directly)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ebl.EnvelopeManifest'
      - description: documentation only (not used directly)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/ebl.EnvelopeTransferChainEntry'
      responses:
        "200":
          description: Signed response - Transfer accepted immediately (RECE or DUPE)
            - see the 'default' response for details of the response payload
          schema:
            type: string
        "201":
          description: Transfer started but not yet accepted
          schema:
            $ref: '#/definitions/pint.EnvelopeTransferStartedResponse'
        "400":
          description: Malformed request
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        "422":
          description: Signed response - Signature or validation failed (BSIG/BENV)
            - see the 'default' response for details of the response payload
          schema:
            type: string
        "500":
          description: Internal error processing request
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        default:
          description: documentation only (not returned directly) - decoded payload
            of the signed response
          schema:
            $ref: '#/definitions/pint.EnvelopeTransferFinishedResponse'
      summary: Start envelope transfer
      tags:
      - PINT
  /v3/envelopes/{envelopeReference}/additional-documents/{documentChecksum}:
    put:
      consumes:
      - application/json
      description: |
        Transfer an additional document (supporting document or eBL visualisation) associated with an eBL envelope transfer.

        The receiving platform validates:
        - Document was declared in the EnvelopeManifest.
        - SHA-256 checksum matches the URL parameter.
        - Document size matches the manifest.

        **Envelope Reference**

        The envelope reference is a UUID that identifies the eBL envelope transfer (this is returned
        by the start transfer endpoint when the transfer is started)

        **Request Body Format**

        The request body is a base64-encoded string containing the document content.
        Example: `UmF3IGNvbnRlbnQgb2YgdGhlIGZpbGU...` (plain base64 string, no JSON structure).
        The decoded content type is determined by the sending platform based on the media type
        declared in the EnvelopeManifest.

        If the sending platform loses track of the transfer state for a document, it can safely
        retry the transfer by resending the same document.

        If the sending platform loses track of which documents have not been received, it can call
        the PUT /v3/envelopes/{envelopeReference} endpoint again to get the current state.

        **Success Response:**

        `204 No Content` - This is returned when the document is received successfully,
        or when the document has already been received.


        **Error Responses (signed):**

        `409 Conflict` - Checksum or size mismatch (INCD response code).

        `422 Unprocessable Entity` - Envelope rejected (BSIG/BENV response code).
      parameters:
      - description: Envelope reference (UUID)
        in: path
        name: envelopeReference
        required: true
        type: string
      - description: SHA-256 checksum of the document
        in: path
        name: documentChecksum
        required: true
        type: string
      - description: Base64-encoded document content (plain string, e.g., UmF3IGNvbnRlbnQ...)
        in: body
        name: body
        required: true
        schema:
          type: string
      responses:
        "204":
          description: Document received successfully
        "400":
          description: Malformed request
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        "404":
          description: Envelope or document not found
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        "409":
          description: Checksum/size mismatch (INCD)
          schema:
            type: string
        "422":
          description: Envelope rejected (BSIG/BENV)
          schema:
            type: string
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
      summary: Transfer additional documents
      tags:
      - PINT
  /v3/envelopes/{envelopeReference}/finish-transfer:
    put:
      consumes:
      - application/json
      description: |
        Use this endpoint after you have finished transferring all additional documents.

        Prior to accepting envelope transfer, the receiving platform ensures that all supporting documents listed in the envelope manifest have been successfully transferred.

        **Success Responses**

        `200 OK` - Transfer accepted (RECE)

        All additional documents have been received and the envelope transfer has been accepted on the platform.

        The payload of the signed response contains the last transfer chain entry checksum and a list of all received additional document checksums.
        (See the `default` response for details of the response payload.)

        **Retry handling:**
        When the sender retries a transfer that has already been accepted, the receiver will return a signed response and
        the payload will contain a structure identical to the original response, but with a response code of DUPE
        and an extra field: duplicateOfAcceptedEnvelopeTransferChainEntrySignedContent.

        **Notes**

        **Error Responses (signed)**

        `409 Conflict` - Missing documents (MDOC)
        - One or more additional documents are still missing (see missingAdditionalDocumentChecksums in response payload).

        `422 Unprocessable Entity` - Envelope rejected (BSIG/BENV) (signed response)
        - BSIG: Signature validation failed.
        - BENV: Envelope validation failed.

        See the `default` response for details of the response payload.

        **Error Responses (unsigned)**

        `400 Bad Request` - Malformed request - returned as an unsigned error response.
        `500 Internal Server Error` - Internal error - returned as an unsigned error response.

        **Note:** Unsigned responses cannot be verified as originating from the receiving platform.
        Do not assume an unsigned error response means the transfer was rejected.
        Only determine transfer acceptance/rejection from signed responses.
      parameters:
      - description: Envelope reference (UUID)
        in: path
        name: envelopeReference
        required: true
        type: string
      responses:
        "200":
          description: Signed response - Transfer accepted (RECE/DUPE)
          schema:
            type: string
        "409":
          description: Signed response - Missing documents (MDOC) or disputed (DISE)
          schema:
            type: string
        "422":
          description: Signed response - Envelope rejected (BSIG/BENV)
          schema:
            type: string
        "500":
          description: Internal error processing request
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        default:
          description: documentation only (not returned directly) - decoded payload
            of the signed response
          schema:
            $ref: '#/definitions/pint.EnvelopeTransferFinishedResponse'
      summary: Finish envelope transfer
      tags:
      - PINT
  /v3/receiver-validation:
    post:
      consumes:
      - application/json
      description: |-
        Request the name of a party (legal entity) given a party code. This enables the sending service to
        to check the receiver party exists and is active before sending an eBL (similar to how bank
        transfers enable users to confirm the receiver's account name before confirming the transfer).

        A successful response asserts that the platform will accept an eBL for the account or user
        denoted by the provided identifying code.

        Note the sender can provider more than one identity code for the same party (e.g. both a DID and a LEI for the same company).
        The receiver platform will reject transfers where these codes resolve to different parties on their system.
      parameters:
      - description: Party identifying code
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.PartyIdentifyingCode'
      produces:
      - application/json
      responses:
        "200":
          description: Party found and active
          schema:
            $ref: '#/definitions/pint.ReceiverValidationResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        "404":
          description: Party not found or inactive
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/pint.ErrorResponse'
      summary: Validate a receiver party
      tags:
      - PINT
  /version:
    get:
      description: |-
        Returns the version and build information for the service
        Note: version information is embedded at build time using ldflags. See build.sh for details.
        Returns placeholders when running from source.
      produces:
      - application/json
      responses:
        "200":
          description: Version information
          schema:
            $ref: '#/definitions/handlers.VersionResponse'
      summary: Get version information
      tags:
      - Common
produces:
- application/json
swagger: "2.0"
tags:
- description: PINT API endpoints
  name: PINT
- description: Server API endpoints (jwks, health, readiness, version, etc.)
  name: Common
- description: Manage the adminstration creation of parties (legal entities). These
    endpoints are unprotected and for use in development and testing only.
  name: Admin
